parameters:
  - name: playgrounds
    type: object
    default:
    - name: TestShop
      path: src/playground/TestShop/AppHost/AppHost.csproj
    - name: BicepSample
      path: src/playground/bicep/BicepSample.AppHost/BicepSample.AppHost.csproj

steps:
- ${{ each playground in parameters.playgrounds }}:
  - bash:
      dotnet run --project ${{ playground.path }} -- --publisher manifest --output-path .
    displayName: ${{ playground.name }}
- bash: |
    git diff-index --quiet --cached HEAD --
